<fieldset>
  <legend>The Basics</legend>
  <p>
    <%= form.label :title %>
    <%= form.text_field :title %>
  </p>

  <p>
    <%= form.label :story %>
    <%= form.text_area :story %>
  </p>
</fieldset>

<fieldset>
  <legend>Extra Details</legend>
  <p>
    <%= form.label :tag_list, "Tags" %>
    <%= form.text_field :tag_list %>
  </p>

  <p>
    <%= form.label :location, 'Where in the world were you sleeping?' %>
    <%= form.text_field :location %>
  </p>

  <p>
    <%= form.label :dreamt_on, "When was the dream" %>
    <%= form.date_select :dreamt_on, :order => [:day, :month, :year], 
      :start_year => Date.today.year - 5, :end_year => Date.today.year %>
  </p>
</fieldset>

<fieldset id="appearances">
  <legend>Appearances</legend>
  <ul>
  <% form.fields_for :appearances do |app_form| %>
  <li>
    <p>
      <%= app_form.label :name %>
      <%= app_form.text_field :name %>
    </p>
    
    <p>
      <%= app_form.label :email %>
      <%= app_form.text_field :email %>
    </p>
    
    <p>
      <%= app_form.label :role %>
      <%= app_form.text_field :role %>
    </p>
  </li>
  <% end %>
  </ul>
</fieldset>

<% content_for :extra_headers do %>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<%= javascript_include_tag 'has_many' %>
<script type="text/javascript" charset="utf-8">
$(function() {
  $('#appearances').append('<p><a href="#" class="add-link">Add Another</a></p>');
  HasMany.attach('#appearances');
});
</script>
<% end %>