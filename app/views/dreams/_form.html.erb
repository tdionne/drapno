<div id="left-col">
  <h1 id="h_submitadream" class="ir">Submit a dream<span></span></h1>
  <div class="inner">
    <table>
      <tr>
        <td colspan="3">
          <p>
            <%= form.label :title, 'Give your dream a title' %><br />
            <%= form.text_field :title %>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="3">
          <p>
            <%= form.label :story, 'Describe your dream' %><br />
            <%= form.text_area :story, :cols => '60', :rows => '7' %>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <p>
            <%= form.label :dreamt_on, "Dream Date:" %><br />
            <%= form.date_select :dreamt_on, :order => [:day, :month, :year], 
              :start_year => Date.today.year - 5, :end_year => Date.today.year %>
          </p>
        </td>
        <td>
          <p>
            <%= form.label :location, 'Location:' %><br />
            <%= form.text_field :location %>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="3">
          <h2>Who is in your dream</h2>
        </td>
      </tr>
      <% form.fields_for :appearances do |app_form| %>
      <% if app_form.object.new_record? %>
      <tr class="appearances new">
        <td>
          <p>
            <%= app_form.label :name, 'Their Name:' %><br />
            <%= app_form.text_field :name, :size => 15 %>
          </p>
        </td>
        <td>
          <p>
            <%= app_form.label :role, 'Their Role:' %><br />
            <%= app_form.text_field :role, :size => 12 %>
          </p>
        </td>
        <td>
          <p>
            <%= app_form.label :email, 'Their Email:' %><br />
            <%= app_form.text_field :email, :size => 30 %>
          </p>
          <p style="text-align:right">
            (Let them Know) 
            <%= app_form.check_box :should_be_notified %>
          </p>
        </td>                    
      </tr>
      <% else %>
      <tr class="appearances old" id="<%= dom_id(app_form.object) %>">
        <td colspan="3">
          <%= app_form.object.name %> as <%= app_form.object.role %><br />
          <%= app_form.label :_delete, 'Delete' %>
          <%= app_form.check_box :_delete %>
        </td>
      </tr>
      <% end %>
      <% end %>

      <tr>
        <td colspan="3">
          <p style="text-align:right;">
            Private <input type="checkbox" name="" value="" />
            Public <input type="checkbox" name="" value="" />
          </p>
          <p style="margin:2em 0" class="clearfix"><button type="submit" class="submit-dream"><span>Submit my dream</span></button></p>                      
        </td>
      </tr>
    </table>
  </div> <!-- //inner -->  

</div> <!-- //left-col -->

<div id="right-col">
  <h2 id="h_tagyourdream" class="ir">Tag your dream<span></span></h2>
  <div class="inner">
    <h2>Add <span>optional</span> data to help understand your dreams over time.</h2>
    <p style="color:#544915;">Tag your dream. Put a comma between tags. Eg, running, nightime, swimming etc..</p>
    <%= form.text_area :tag_list, :style => 'width: 100%', :rows => '4' %>
  </div>
</div> <!-- //right-col -->

<% content_for :extra_headers do %>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<%= javascript_include_tag 'has_many' %>
<script type="text/javascript" charset="utf-8">
$(function() {
  $('tr.appearances:last').after('<tr class="appearances append"><td colspan="3"><p><a class="add-link" href="">Add another person to your dream +</a></p></td></tr>');
  HasMany.attach('tr.appearances');
});
</script>

<% end %>