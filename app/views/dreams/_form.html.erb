<div id="left-col">
  <h1 id="h_submitadream" class="ir">Submit a dream<span></span></h1>
  <div class="inner">
    <table>
      <tr>
        <td colspan="3">
          <p>
            <%= form.label :title, 'Give your dream a title' %><br />
            <%= form.text_field :title %>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="3">
          <p>
            <%= form.label :story, 'Describe your dream' %><br />
            <%= form.text_area :story, :cols => '60', :rows => '7' %>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <p>
            <%= form.label :dreamt_on, "Dream Date:" %><br />
            <%= form.date_select :dreamt_on, :order => [:day, :month, :year], 
              :start_year => Date.today.year - 5, :end_year => Date.today.year %>
          </p>
        </td>
        <td>
          <p>
            <%= form.label :location, 'Location:' %><br />
            <%= form.text_field :location %>
          </p>
        </td>
      </tr>
      <tr>
        <td colspan="3">
          <h2>Who is in your dream</h2>
        </td>
      </tr>
      <% form.fields_for :appearances do |app_form| %>
      <% if app_form.object.new_record? %>
      <tr class="appearances new">
        <td colspan="3">
          <p>
            <%= app_form.label :name, 'Their Name' %>
            <%= app_form.text_field :name, :size => 12 %>
            <%= app_form.label :relationship, 'Your Relationship' %>
            <%= app_form.text_field :relationship, :size => 20 %>
          </p>
          <p>
            <%= app_form.label :role, 'Their Role' %>
            <%= app_form.text_field :role, :size => 12 %>
            <%= app_form.label :email, 'Their Email' %>
            <%= app_form.text_field :email, :size => 20 %>
          </p>
          <p>
            <%= app_form.label :is_public_figure, 'Are they a figure in public life?' %>
            <%= app_form.check_box :is_public_figure %>
          </p>
          <p>
            <%= app_form.label :should_be_notified, 'Let Them Know' %>
            <%= app_form.check_box :should_be_notified %>
          </p>
        </td>                    
      </tr>
      <% else %>
      <tr class="appearances old" id="<%= dom_id(app_form.object) %>">
        <td colspan="3">
          <%= app_form.object.name %> as <%= app_form.object.role %><br />
          <%= app_form.label :_delete, 'Delete' %>
          <%= app_form.check_box :_delete %>
        </td>
      </tr>
      <% end %>
      <% end %>

      <tr>
        <td colspan="3">
          <h2 id="h_tagyourdream" class="ir">Tag your dream<span></span></h2>
          <div class="inner">
            <h2>Add <span>optional</span> data to help understand your dreams over time.</h2>
            <p style="color:#544915;">Tag your dream. Put a comma between tags. Eg, running, nightime, swimming etc..</p>
            <%= form.text_area :tag_list, :style => 'width: 100%', :rows => '4' %>
          </div>
        </td>  
      </tr>
        
      <tr>
        <td colspan="3">
          <p style="margin:2em 0; text-align: right" class="clearfix">
            <% if form.object.new_record? %>
              <%= form.submit 'Preview my dream' %> 
            <% end %>
            <%= image_submit_tag '/images/btn_submitadream.gif', :alt => 'Submit my dream' %>
          </p>                      
        </td>
      </tr>
    </table>
  </div> <!-- //inner -->  

</div> <!-- //left-col -->

<div id="right-col">
</div> <!-- //right-col -->

<% content_for :extra_headers do %>
<%= javascript_include_tag 'has_many' %>
<script type="text/javascript" charset="utf-8">
$(function() {
  $('tr.appearances:last').after('<tr class="appearances append"><td colspan="3"><p><a class="add-link" href="">Add another person to your dream +</a></p></td></tr>');
  HasMany.attach('tr.appearances');
});
</script>
<style type="text/css" media="screen">
tr.appearances {
  border-bottom: 1px dotted ;
}
  tr.appearances p {
    clear: both;
    padding-top: 0.5em;
  }
  tr.appearances label {
    float: left;
    margin-right: 15px;
  }
  tr.appearances input {
    float: left;
    margin-right: 15px;
  }
</style>

<% end %>